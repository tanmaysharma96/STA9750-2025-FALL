---
title: "Final Project â€“ SQ Analysis: Ridership vs Transit Crime"
author: "Tanmay Sharma"
number-sections: true
toc: true
toc-depth: 3
code-fold: true
code-summary: "Show Code"
format:
  html:
    theme: cosmo
    df-print: paged
---
::: {.callout-note}
### ğŸ“˜ Overview  
This analysis investigates how **subway ridership volume** and **transit-related crime** move together across NYCâ€™s transit system (2015â€“2025).  
It integrates **API-acquired open data**, robust data cleaning, monthly aggregation, correlation analysis, and professional-grade visualizations to evaluate time-varying crimeâ€“ridership dynamics.
:::

### ğŸš‡ Specific Question (SQ): Does Subway Ridership Volume Correlate with Transit Crime?

âœ” This SQ examines how **monthly subway ridership** and **transit-related crime** move together across NYCâ€™s system  
âœ” Uses **NYPD Complaint Data** (filtered to subway incidents) + **MTA Monthly Ridership** from **2015â€“2025**  
âœ” Evaluates whether higher ridership corresponds to **higher crime counts** at a system-wide level  
âœ” Separates analysis into **overall**, **pre-2022**, and **post-2022** periods to account for COVID-era disruptions  
âœ” Incorporates **correlation measures**, **indexed trends**, and **crimes per million riders** to capture both volume and risk dynamics  

â¡ The goal is to assess whether transit crime scales with rider volume, and how this relationship has changed in recent years.

### ğŸ“¦ Step 1: Load Required Libraries

âœ” **tidyverse** â€” core toolkit for data wrangling, transformation, and visualization  
âœ” **lubridate** â€” simplifies working with dates, months, and time-based grouping  
âœ” **janitor** â€” cleans column names and provides helpful data-quality utilities  
âœ” **httr2** â€” handles API requests to download live NYPD and MTA datasets  
âœ” **readr** â€” fast and efficient reading of large CSV files  
âœ” **scales** â€” improves numeric formatting for plots (labels, commas, percentages)

â¡ These libraries provide the foundational tools for acquiring, cleaning, merging, and analyzing crime and ridership datasets.
```{r}
# ---- 1. Load Libraries ----
library(tidyverse)
library(lubridate)
library(janitor)
library(httr2)
library(readr)
library(scales)
library(gt)
```

### ğŸ“ Step 2: Create Project Data Directory

âœ” Creates a dedicated folder (`data/courseproject`) to store all downloaded datasets  
âœ” Ensures the directory exists before saving files, preventing write errors  
âœ” `recursive = TRUE` allows creation of nested folders if they do not already exist  
âœ” Keeps all raw data organized and reproducible across different machines

â¡ This guarantees a clean, consistent file structure for the entire project workflow.

```{r}
dir.create(file.path("data", "courseproject"), showWarnings = FALSE, recursive = TRUE)
```
### ğŸš¨ Step 3.1: Download Transit-Related NYPD Complaint Data (2015â€“2025)

âœ” Pulls **only subway-related complaints** directly from the NYC Open Data API  
âœ” Applies a **date filter (2015â€“2025)** to avoid downloading millions of irrelevant rows  
âœ” Uses a **targeted SELECT statement** to keep only essential fields  
âœ” Expands API limits to ensure the full filtered dataset is returned  
âœ” Saves the cleaned CSV locally for reproducibility and faster re-runs  

â¡ This approach prevents memory issues (`std::bad_alloc`) while providing a clean, transit-only dataset for downstream analysis.

```{r}
# =========================================================
# 3.1 NYPD COMPLAINT DATA (Filtered API Download)
# Only transit-related complaints, only 2015â€“2025
# Avoid downloading 8M+ rows (prevents std::bad_alloc)
# =========================================================

complaints_req <- request("https://data.cityofnewyork.us/resource/qgea-i56i.csv") |>
  req_url_query(
    "$select" = "cmplnt_num,cmplnt_fr_dt,juris_desc,prem_typ_desc,boro_nm,ofns_desc,law_cat_cd",
    "$where"  = "cmplnt_fr_dt between '2015-01-01T00:00:00' and '2025-12-31T23:59:59' AND (juris_desc = 'N.Y. TRANSIT POLICE' OR prem_typ_desc = 'TRANSIT - NYC SUBWAY')",
    "$limit"  = 500000  # big enough cap; API default is only 1000
  )

complaints_path <- file.path("data", "courseproject", "complaints_transit_filtered.csv")

complaints_req |>
  req_progress() |>
  req_perform(path = complaints_path)

complaint_df <- readr::read_csv(
  complaints_path,
  show_col_types = FALSE
)
```
### ğŸš‡ Step 3.2: Download MTA Monthly Subway Ridership Data

âœ” Retrieves **system-wide monthly ridership** for NYC subways (2008â€“present)  
âœ” Uses the NY State Open Data archival API for a stable and reproducible download  
âœ” Saves the dataset locally to `data/courseproject/` for consistent project structure  
âœ” `req_progress()` provides a clear download status when handling large files  
âœ” `read_csv()` loads the data efficiently for preprocessing and merging  

â¡ This dataset supplies the core ridership metric needed to evaluate how crime levels scale with subway usage over time.
```{r}

# 3.2 MTA Monthly Ridership (Subway, 2008â€“Present)
url_data_monthly_ridership <- "https://data.ny.gov/api/archival.csv?id=xfre-bxip&version=64&method=export"

request(url_data_monthly_ridership) |>
req_progress() |>
req_perform(path = file.path("data", "courseproject", "monthly_ridership.csv"))

monthly_ridership_df <- read_csv(
file.path("data", "courseproject", "monthly_ridership.csv"),
show_col_types = FALSE
)
```
### ğŸ“… Step 4: Define Global Date Window (2015â€“2025)

âœ” Sets a consistent **10-year analysis window** for all datasets  
âœ” Ensures crime and ridership data are aligned on the same monthly timeline  
âœ” Filters out older records (pre-2015) and incomplete future records  
âœ” Creates a unified structure for merging NYPD and MTA data accurately  

â¡ Establishing this shared date range is essential for producing valid system-wide comparisons.
```{r}

# 4. Global Date Window for SQ (2015â€“2025)
start_date <- as.Date("2015-01-01")
end_date <- as.Date("2025-12-31")
```
### ğŸš¨ Step 5: Build Monthly System-Wide Transit Crime Counts

âœ” Filters NYPD complaint records to include **only subway-related incidents**  
âœ” Treats each valid complaint as a **single crime event** for system-wide aggregation  
âœ” Converts complaint dates into **monthly units**, enabling time-aligned comparison with ridership  
âœ” Ensures only unique complaint numbers are counted to avoid duplication  
âœ” Produces the monthly crime totals needed to evaluate the SQ  

â¡ This creates the core dataset for analyzing how transit crime levels move relative to subway ridership.
```{r}
# 5. Build Monthly Transit Crime Counts (System-Wide)
#SQ: Does subway ridership volume correlate with the number of crimes?
#Here we treat transit-related complaints as "crimes".
#ridership <- readr::read_csv(path_ridership, show_col_types = FALSE)
```
### ğŸš¨ Filtering & Structuring Transit-Related Complaint Records

âœ” Cleans all column names for consistency across datasets  
âœ” Retains only complaints handled by **N.Y. Transit Police** or occurring in **NYC Subway premises**  
âœ” Converts the raw complaint date into a standard `Date` format  
âœ” Aggregates dates into **monthly periods** using `floor_date()` to align with monthly ridership data  
âœ” Establishes the foundation for constructing accurate system-wide monthly crime totals  

â¡ This step isolates true transit incidents and prepares them for monthly-level correlation analysis.

```{r}

complaints_transit <- complaint_df |>
clean_names() |>

# keep transit-relevant complaints
filter(
juris_desc == "N.Y. TRANSIT POLICE" |
prem_typ_desc == "TRANSIT - NYC SUBWAY"
) |>
mutate(
date = as.Date(cmplnt_fr_dt),
month = floor_date(date, "month")
)
```
### ğŸ“… Restricting Complaints to the 2015â€“2025 Analysis Window

âœ” Filters all transit-related complaints so only incidents between **2015 and 2025** are included  
âœ” Ensures full alignment with the defined SQ study period  
âœ” Removes outdated or incomplete records outside the analysis range  
âœ” Guarantees that monthly crime totals and ridership figures share the same temporal scope  

â¡ This step keeps the dataset focused, comparable, and directly relevant to the SQ.
```{r}
# =========================================================
# ğŸ”— 4. restrict to 2015â€“2025 window
# =========================================================
complaints_transit <- complaints_transit |>
filter(between(date, start_date, end_date))
```
### ğŸ” Ensuring Unique Complaints & Building Monthly Crime Totals

âœ” Uses `distinct()` to keep **only one record per complaint number**, preventing accidental double-counting  
âœ” Groups all cleaned records by **month**, matching the structure of the ridership dataset  
âœ” Counts the total number of **transit-related complaints** in each month  
âœ” Produces a clean, reliable `felony_count` metric for system-wide crime analysis  

â¡ This creates the monthly crime time series needed to compare directly against subway ridership.
```{r}
# =========================================================
# ğŸ“Š 5. create monthly transit crime counts
# =========================================================
complaints_transit <- complaints_transit |>
group_by(month) |>
summarise(
felony_count = n(), # total transit complaints per month
.groups = "drop"
)
#sanity check
summary(complaints_transit$felony_count)
head(complaints_transit)
```
### ğŸš‡ Building Monthly System-Wide Subway Ridership

âœ” Standardizes column names for consistent processing  
âœ” Automatically detects the **date column** and the **total ridership column**, making the code robust to schema changes  
âœ” Converts all date values into monthly periods using `floor_date()`  
âœ” Ensures the ridership field is properly parsed as a numeric value, even when stored as text  
âœ” Filters the dataset to the shared **2015â€“2025** analysis window  
âœ” Aggregates ridership at the **monthly level**, producing a clean `subways_total` metric  

â¡ This step generates the monthly ridership series required to compare against monthly crime counts.
```{r}
# =========================================================
# ğŸ“ˆ 6. Build Monthly Subway Ridership (System-Wide)
# =========================================================

monthly_ridership_df <- monthly_ridership_df |>
clean_names()

# ---- A) Try to detect date and subway ridership columns ----
date_col_r <- names(monthly_ridership_df)[
str_detect(names(monthly_ridership_df),
regex("date|month|period", ignore_case = TRUE))
][1]

sub_col_r <- names(monthly_ridership_df)[
str_detect(names(monthly_ridership_df),
regex("subway|subways.*total|ridership", ignore_case = TRUE))
]

# ---- Helper: robust numeric coercion ----
to_numeric <- function(x) {
if (is.numeric(x)) as.numeric(x) else readr::parse_number(as.character(x))
}

ridership_month <- monthly_ridership_df |>
mutate(
month = floor_date(
parse_date_time(!!sym(date_col_r),
orders = c("ymd", "mdy", "my")),
"month"
),
subways_total = to_numeric(.data[[sub_col_r[1]]])
) |>
filter(
between(month, start_date, end_date),
!is.na(subways_total)
) |>
group_by(month) |>
summarise(
subways_total = sum(subways_total, na.rm = TRUE),
.groups = "drop"
)
```
### ğŸ”— Step 7: Merge Crime and Ridership Data + Create Normalized Metric

âœ” Combines monthly crime counts with monthly ridership totals using a clean `left_join()`  
âœ” Removes months where either dataset is missing values to maintain analytical integrity  
âœ” Computes **crimes per million riders**, a normalized measure that accounts for fluctuations in ridership volume  
âœ” Allows the analysis to distinguish between changes in *crime totals* and changes in *crime risk per rider*  
âœ” Produces a unified `merged` dataset used for correlation analysis and visualization  

â¡ The sanity checks (`summary()` and `head()`) confirm that the merged dataset behaves as expected before further analysis.
```{r}
# 7. Merge Crime + Ridership and Create Normalized Metric
merged <- ridership_month |>
left_join(complaints_transit, by = "month") |>
filter(!is.na(felony_count), !is.na(subways_total)) |>
mutate(
crimes_per_million = 1e6 * felony_count / subways_total
)
# =========================================================
# ğŸ§¾ Quick sanity check
# =========================================================
summary(merged$crimes_per_million)
head(merged)
```
### ğŸ§  Interpretation: Crime per Million Riders

1. Transit crime rates ranged from **approximately 4 to 38 crimes per million riders** throughout the study period.  
2. **2015â€“2017** show noticeably **higher per-capita crime**, largely because ridership was at peak levels while crime counts stayed relatively steady.  
3. After **2018**, per-million crime rates fall as ridership remains high and crime totals do not increase at the same pace.  
4. The **COVID-19 period** disrupts both ridership and crime, creating sharp swings in per-capita values that influence later correlation patterns.  

â¡ Overall, rider risk decreases prior to COVID, becomes distorted during the pandemic, and stabilizes again as ridership begins recovering.

```{r}
#Monthly Transit Crime Trend with LOESS Smoothing
p_trend <- ggplot(merged, aes(month, felony_count)) +
geom_line(alpha = 0.5) +
geom_smooth(se = FALSE, linewidth = 1.1) +
labs(
title = "Monthly Transit Crime Trend (2015â€“2025)",
subtitle = "Raw counts with LOESS smoothing to highlight long-run pattern",
x = "Month",
y = "Transit-Related Complaints (count)"
) +
theme_minimal(base_size = 13)

p_trend
```
### ğŸ§  Interpretation: Smoothed Monthly Crime Trend

- Monthly transit crime shows **substantial short-term noise**, but the LOESS line reveals a smoother underlying pattern.  
- Crime levels are **relatively high pre-2018**, ease downward slightly, and then fluctuate around a lower plateau.  
- During the **COVID period**, crime counts fall, but not as sharply as ridership, creating an apparent dip followed by a rebound.  
- Post-2022, the smoothed trend indicates **gradually rising crime counts**, consistent with your correlation and risk metrics.  

â¡ This view helps separate **long-run structure** from **month-to-month volatility** in transit crime.

```{r}
#8. Correlation Analysis for SQ
# "Does subway ridership volume correlate with the number of crimes?"

cor_overall <- cor(merged$felony_count, merged$subways_total, use = "complete.obs")

cor_pre2022 <- merged |>
filter(year(month) < 2022) |>
summarise(cor = cor(felony_count, subways_total, use = "complete.obs")) |>
pull(cor)

cor_post2022 <- merged |>
filter(year(month) >= 2022) |>
summarise(cor = cor(felony_count, subways_total, use = "complete.obs")) |>
pull(cor)

cor_table <- tibble(
Period = c("All Months (2015â€“2025)", "Pre-2022", "2022+"),
Correlation = c(cor_overall, cor_pre2022, cor_post2022)
)

print(cor_table)

# Publication-Style Correlation Table

cor_table_gt <- cor_table |>
mutate(
Correlation = round(Correlation, 3)
) |>
gt() |>
tab_header(
title = "Correlation Between Ridership and Transit Crime by Period"
)

cor_table_gt
```

::: {.callout-important}
### ğŸ“Œ Key Indicators for SQ (2015â€“2025)

- **Total Transit Complaints:** `r sum(merged$felony_count)`  
- **Average Monthly Complaints:** `r round(mean(merged$felony_count), 1)`  
- **Average Crimes per Million Riders:** `r round(mean(merged$crimes_per_million), 2)`  
- **Strongest Crimeâ€“Ridership Correlation:** Post-2022 (`r round(cor_post2022, 3)`)  

These metrics provide a quick, high-level snapshot of how **crime volume** and **crime risk per rider** behave over the study period.
:::

### ğŸ§  Interpretation: Correlation Between Ridership and Transit Crime

1. The **overall correlation is modest (0.29)**, indicating that ridership and crime move together, but not strongly.  
2. **Pre-2022**, the correlation is very weak (**0.19**), suggesting crime levels did not scale meaningfully with changes in ridership.  
3. **Post-2022**, the correlation strengthens substantially (**0.54**), indicating a clearer relationship between ridership volume and crime counts.  
   - As ridership recovers, **crime counts rise proportionally**.  
   - Transit crime appears **more sensitive to crowding and rider volume** in recent years.  

â¡ These patterns show that the ridershipâ€“crime relationship is **time-dependent**, becoming stronger in the post-COVID recovery era.


```{r}
#9. Visualizations for Slides / Report

# 9A. Scatter: Monthly Transit Crimes vs Subway Ridership

p1 <- ggplot(merged, aes(x = subways_total, y = felony_count)) +
geom_point(alpha = 0.6) +
geom_smooth(method = "lm", se = FALSE) +
scale_x_continuous(labels = label_number(big.mark = ",")) +
scale_y_continuous(labels = label_number(big.mark = ",")) +
labs(
title = "Monthly Transit Crimes vs Subway Ridership",
subtitle = "NYPD Transit Complaints vs MTA Monthly Subway Ridership (2015â€“2025)",
x = "Monthly Subway Ridership (entries + exits)",
y = "Transit-Related Complaints (count)"
) +
theme_minimal(base_size = 13)

print(p1)
```
### ğŸ§  Interpretation: Scatterplot of Monthly Transit Crimes vs. Ridership

1. The scatter is **widely dispersed**, showing substantial variation in crime even at similar ridership levels.  
2. The **slightly upward-sloping regression line** indicates that higher ridership is only **modestly associated** with higher crime totals.  
3. **COVID-era months** stand out as outliers â€” extremely low ridership but still moderate crime counts â€” which flattens the overall trend prior to 2022.  
4. These visual patterns align with the correlation results: the ridershipâ€“crime relationship becomes **meaningfully stronger only in the later years** of the dataset.  

â¡ The scatterplot reinforces that the link between ridership and crime is **weak before 2022** and **stronger after ridership recovery begins**.

```{r}
#Faceted Scatter: Pre- vs Post-2022
merged_period <- merged |>
mutate(
period = ifelse(lubridate::year(month) < 2022, "Pre-2022", "2022+"),
ridership_millions = subways_total / 1e6 # rescale to millions
)

p1_faceted <- ggplot(merged_period,
aes(x = ridership_millions, y = felony_count)) +
geom_point(alpha = 0.6) +
geom_smooth(method = "lm", se = FALSE) +
scale_x_continuous(
breaks = scales::pretty_breaks(4),
labels = scales::label_number(accuracy = 1)
) +
scale_y_continuous(labels = scales::label_number(big.mark = ",")) +
facet_wrap(~ period, scales = "free_x") +
labs(
title = "Ridership vs Transit Crime by Period",
subtitle = "Comparing Pre-2022 and Post-2022 Relationships",
x = "Monthly Subway Ridership (millions of entries + exits)",
y = "Transit-Related Complaints (count)"
) +
theme_minimal(base_size = 13)

p1_faceted
```
### ğŸ§  Interpretation: Ridershipâ€“Crime Relationship by Period

- In the **Pre-2022** panel, the regression line is **flatter**, and the cloud of points is more diffuse â€” ridership and crime are only **weakly linked**.  
- In the **2022+** panel, the regression line is **clearly steeper**, and points align more closely along the trend, indicating a **stronger ridershipâ€“crime connection**.  
- This visual contrast reinforces the numeric results: the **correlation roughly triples** from the pre-2022 period to the post-2022 period.  

â¡ The relationship between ridership and crime is **structurally different after COVID**, which is crucial context for interpreting system-wide trends.

```{r}
#9B. Indexed Time Series (baseline = 100 at first month)

base_vals <- merged |>
filter(month == min(month))

merged <- merged |>
mutate(
ridership_index = 100 * subways_total / base_vals$subways_total,
crimes_index = 100 * felony_count / base_vals$felony_count
)

merged_long <- merged |>
select(month, ridership_index, crimes_index) |>
pivot_longer(-month, names_to = "metric", values_to = "index")

p2 <- ggplot(merged_long, aes(month, index, color = metric)) +
geom_line(linewidth = 1.05) +
labs(
title = "Indexed Trends: Transit Crimes vs Ridership",
subtitle = "Baseline = 100 at first month in 2015",
x = "Month",
y = "Index (Baseline = 100)",
color = NULL
) +
theme_minimal(base_size = 13) +
theme(legend.position = "bottom")

print(p2)
```
### ğŸ§  Interpretation: Indexed Trends for Ridership and Transit Crime

**Ridership Index**
1. Shows a **sharp decline during COVID (2020)** as system-wide usage collapsed.  
2. Displays a **gradual recovery** in the following years.  
3. Still remains **below pre-2018 levels**, indicating an incomplete ridership rebound.

**Crime Index**
- Remains **relatively stable from 2015â€“2019**, even as ridership fluctuates.  
- In 2020,  
  1. **Ridership collapses**, but  
  2. Crime decreases **far less proportionally**, causing **higher per-rider crime risk** despite fewer total incidents.

**Post-2022**
- Both indices begin to **rise together more closely**, aligning with the **stronger correlation** observed in the later period.

â¡ This trend suggests that the crimeâ€“ridership relationship tightened after the pandemic, with crime levels

```{r}
# 9C. Crimes per Million Riders Over Time

p3 <- ggplot(merged, aes(month, crimes_per_million)) +
geom_line(linewidth = 1) +
labs(
title = "Transit Crimes per Million Riders (Monthly)",
subtitle = "NYPD Transit Complaints Normalized by MTA Subway Ridership",
x = "Month",
y = "Crimes per Million Riders"
) +
theme_minimal(base_size = 13)

print(p3)
```
### ğŸ§  Interpretation: Crimes per Million Riders (Normalized Crime Risk)

- **Pre-2018:** Crime-per-capita is relatively high, averaging **30â€“35 crimes per million riders**.  
- **2018â€“2019:** Per-capita crime drops sharply as ridership reaches peak levels while crime counts remain stable.  
- **2020:** Extremely low ridership during COVID produces an **artificial spike** in per-rider crime risk, even though total complaints decline.  
- **2022â€“2025:** A **steady upward trend** emerges:  
  - Ridership is recovering,  
  - But **complaints are rising faster**,  
  â†’ resulting in **higher normalized crime rates** in recent years.

â¡ This normalized metric captures *actual rider risk*, showing that the system may **feel less safe** even if total crime counts do not rise dramatically.

```{r}
#Heatmap of Crimes per Million Riders Over Time
crime_heat <- merged |>
mutate(
year = lubridate::year(month),
month_num = lubridate::month(month)
)

p_heat <- ggplot(crime_heat, aes(x = month_num, y = factor(year), fill = crimes_per_million)) +
geom_tile(color = "white") +
scale_fill_viridis_c(option = "magma") +
scale_x_continuous(breaks = 1:12) +
labs(
title = "Heatmap of Transit Crimes per Million Riders",
subtitle = "Higher intensity cells indicate higher crime risk per rider",
x = "Month",
y = "Year",
fill = "Crimes per\nMillion"
) +
theme_minimal(base_size = 13)

p_heat
```
### ğŸ§  Interpretation: Heatmap of Normalized Crime Risk

- **Darker cells** correspond to **higher crimes per million riders**, making it easy to spot periods of elevated risk.  
- The pre-2018 rows show **consistently darker shading**, reinforcing the idea that early years had **higher per-rider risk**.  
- The COVID period appears as an **irregular band**, reflecting disrupted ridership and crime patterns.  
- Recent years (2022â€“2025) show a **visible darkening trend**, consistent with the upward slope in the crimes-per-million line plot.  

â¡ The heatmap provides a compact view of how **risk levels shift across both years and seasons**, complementing the time-series plots.

```{r}
# 10. Final Console Message

cat("\nâœ… SQ Analysis Complete â€” Ridership vs Transit Crime (2015â€“2025)\n")
```
### ğŸ§  Final Interpretation for SQ: Ridershipâ€“Crime Relationship (2015â€“2025)

- Subway ridership and transit crime show a **modest overall positive correlation** across 2015â€“2025 (**r â‰ˆ 0.29**).  
- The relationship is **not stable over time**:  
  - **Pre-2022:** Correlation is weak, indicating that crime levels did not strongly scale with ridership.  
  - **Post-2022:** Correlation strengthens significantly (**r â‰ˆ 0.54**), suggesting crime counts now rise more consistently with ridership recovery.  
- Normalized crime measures (**crimes per million riders**) add additional insight:  
  - Rider risk **declined sharply in 2018â€“2019**, when ridership peaked and crime counts remained stable.  
  - Post-COVID, risk levels **rise again**, as crime increases at a faster rate than ridership.  

â¡ Overall, recent years show a tighter link between rider volume and crime levels, while normalized metrics highlight that **per-rider risk has increased** despite crime totals not rising dramatically.

::: {.callout-important}
### ğŸŸ£ Key Takeaway: Ridershipâ€“Crime Dynamics Have Shifted Post-COVID  
- The ridershipâ€“crime correlation strengthened substantially after 2022.  
- Rider risk (crimes per million riders) has increased in recent years, even without dramatic increases in total crime.  
- System-level crime trends must be interpreted relative to underlying ridership volume, not in isolation.  
:::

### âš ï¸ Limitations

- NYPD complaint data reflect **reported incidents**, which may understate true crime levels and vary with reporting behavior.  
- Ridership data are based on **turnstile entries/exits**, which may include noise from repeat taps or non-trip-related swipes.  
- COVID-era months break standard time-series assumptions, making trend estimation more challenging.  
- Crime categories are **aggregated across offense types**; some specific categories may show different dynamics than the system-wide pattern.

### ğŸ”® Future Work

- Extend the analysis to the **station or line level** to identify localized hotspots and high-risk routes.  
- Incorporate **lagged relationships** (e.g., ARIMA, VAR) to see whether changes in ridership predict future crime.  
- Add **covariates** such as service changes, police deployment, or neighborhood socioeconomic indicators.  
- Explore **predictive models** to forecast high-risk months or periods for staffing and resource allocation.


